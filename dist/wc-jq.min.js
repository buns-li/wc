!function(){"use strict";function t(t){return function(e){return Object.prototype.toString.call(e)==="[object "+t+"]"}}function e(t,e){this.cmp=e,this.evt=t,this.subs={},this.times={},this.cb=null,this.sublen=0}function n(t,e,n){this.id=t,this.opts=e||{},this.fac=n,this.state=0}function i(t,e,n){var i=void 0,o=void 0,r=void 0,c=null,s=0;n||(n={});var a=function(){s=!1===n.leading?0:(new Date).getTime(),c=null,r=t.apply(i,o),c||(i=o=null)};return function(){var u=(new Date).getTime();s||!1!==n.leading||(s=u);var f=e-(u-s);return i=this,o=arguments,f<=0||f>e?(c&&(clearTimeout(c),c=null),s=u,r=t.apply(i,o),c||(i=o=null)):c||!1===n.trailing||(c=setTimeout(a,f)),r}}function o(t){var e=this.ctx;return R(e?t?this.ctx+" "+t:this.ctx:t)}function r(t,e){e=e||0;var n=o(t);if(!n)return!1;var i=n.offset(),r=i.left-e,c=i.top-e,s=n.width()+r+e,a=n.height()+c+e,u=o(window),f=u.scrollLeft(),l=u.scrollTop(),d=f+u.width(),h=l+u.height();return!(r>d||f>s||c>h||l>a)}function c(t,e){function n(t,e){var i=t.sheet,o=void 0;if(O)i&&(o=!0);else if(i)try{i.cssRules&&(o=!0)}catch(t){"NS_ERROR_DOM_SECURITY_ERR"===t.name&&(o=!0)}setTimeout(function(){o?e&&e():n(t,e)},20)}var i=void 0;"string"==typeof t?(i=t,t={callback:e}):i=t.url;var o=i&&/\.css(?:\?|$)/i.test(i),r=document.createElement(o?"link":"script");r.charset="utf-8",r.crossOrigin=!0,o?r.rel="stylesheet":(r.async=!0,r.type=t.type||"text/javascript"),function(t,e,i,o){function r(n){t.onload=t.onerror=t.onreadystatechange=null,t=null,e&&e(n)}var c="onload"in t;!o||!O&&c?c?(t.onload=r,t.onerror=function(){r({uri:i,node:t})}):t.onreadystatechange=function(){/loaded|complete/.test(t.readyState)&&r()}:setTimeout(function(){n(t,e)},1)}(r,t.callback,i||"inline-script",o),o?r.href=i:r.src=i,k?F.insertBefore(r,k):F.appendChild(r)}function s(){var t=void 0,e=void 0,i=[];if(f&&f.length)for(var o=f.length;o--;)2!==(t=u[f[o]]).state?(0===t.state&&t.ctx&&t.http&&r&&r(t.ctx)&&i.push(t.id),e=!1):(n.load(t),f.splice(o,1),e=!0);else for(var c in u)if("__env__"!==c)switch((t=u[c]).state){case 0:0===t.state&&t.ctx&&t.http&&r&&r(t.ctx)&&i.push(t.id);case 1:f.push(t.id),e=!1;break;case 2:n.load(t);case 3:default:e=!0}if(!i.length)return e;var s=i.length;if(l.combo){for(var a=l.combo(i,"js");s--;)u[i[s]].state=1;s=i.length,n.prototype.http(a).then(function(){for(;s--;)n.load(u[i[s]])}).catch(function(){for(;s--;)u[i[s]].state=4}),a=l.combo(i,"css"),n.prototype.http(a).catch(function(t){return console.log(t)})}return e}var a={},u={},f=[],l={},d=["$","http","tpl","anim","cache","util"],h=["ready","onLoad","onScroll","onResize","beforeLeave"],p=Array.isArray||t("Array"),v=t("Function"),m=t("Object"),b={},g={on:function(t,e,n){if(!t||!e)return this;var i=e;if(n){var o=!1,r=e;i=function(){g.off(t,i),o||(o=!0,r.apply(this,arguments))}}for(var c=(t=t.split(",")).length;c--;)(b[t[c]]||(b[t[c]]=[])).push(i);return this},off:function(t,e){if(!t&&!e)return b={},this;var n=b[t],i=void 0;if(n&&(i=n.length))if(e)for(;i--;)n[i]===e&&n.splice(i,1);else delete b[t];return this},emit:function(t,e,n){if(t){p(e)||(e=[e]);var i=void 0,o=void 0;if(p(t)){for(var r=0,c=t.length;r<c;r++)if((i=b[t[r]])&&(o=i.length))for(n&&n.sub(t[r],o),i=i.slice();o--;)n&&n.hndIdx(o),i[o].apply(null,e)}else{if(!(i=b[t])||!(o=i.length))return;for(n&&n.sub(t,o),i=i.slice();o--;)n&&n.hndIdx(o),i[o].apply(null,e)}}}},y={},_={};e.prototype={constructor:e,addSub:function(t,e){var n=this.subs[t];n?n.push(e):this.subs[t]=[e]},record:function(t,e){_.c=t,_.p=e,_.t=(new Date).getTime();var n=this.times[_.t]={__oklen:0};return{sub:function(t,e){_.s=t,n[t]||(n[t]={len:e||0,datas:[]})},hndIdx:function(t){_.hndIdx=t}}}},e.signal=function(t,e){if(!t)return _.c+"::"+_.p+"::"+_.t+"::"+_.s+"::"+_.hndIdx;var n=t.split("::"),i=y[n[1]];if(i){var o=i.times[n[2]];if(o){var r=o[n[3]];if(r&&(r.datas[n[4]]=e,r.len===r.datas.length&&(o.__oklen+=1),o.__oklen===i.sublen)){if(i.cb){var c=[];delete o.__oklen;for(var s in o)delete o[s].len,c.push(o[s]);i.cb.apply(null,c)}i.times[n[2]]=null}}}},e.get=function(t){return t?y[t]:null},e.set=function(t){t&&(y[n.nameFn(t.cmp,t.evt)]=t)};n.nameFn=function(t,e){return t+"_"+e},n.prototype={constructor:n,hook:function(t,i){if(!h.includes(t))return this;var o=n.nameFn(this.id,t);g.on(o,i.bind(n.eventRicher),"ready"===t||"onLoad"===t);var r=e.get(n.nameFn("__env__",t));return r||e.set(r=new e(t,"__env__")),r.addSub(this.id,t),this},on:function(t,e){return g.on(n.nameFn(this.id,t),e.bind(n.eventRicher)),this},pub:function(t,i,o){var r=this,c=n.nameFn(this.id,t),s=e.get(c);if(!s)return this;var f=s.subs,d=0,h=void 0,p=void 0,v=void 0,m=void 0,b=void 0;if(!f)return this;var y=s.record(c,this.id),_=[];for(h in f)if(m=u[h]){if(p=f[h])if(p.length){if(v=p.length,d+=v,0!==m.state&&1!==m.state||"continue"!==function(){if(0===m.state&&_.push(h),!(b=a[h]))return"continue";for(;v--;){var e=b[p[v]];if(e){for(var o=!1,c=e.length;c--;){var s=e[c];s.cmp===r.id&&s.evt===t&&(s.data=i,o=!0)}o||e.push({cmp:r.id,evt:t,data:i})}else e[p[v]]=[{cmp:r.id,evt:t,data:i}]}if(!_.length||r.http)return"continue";var f=_.length;if(l.combo){for(var d=l.combo(_,"js");f--;)u[_[f]].state=1;f=_.length,r.http(d).then(function(){for(;f--;)n.load(u[_[f]])}).catch(function(){for(;f--;)u[_[f]].state=4}),d=l.combo(_,"css"),r.http(d).catch(function(t){return console.log(t)})}return"continue"}())for(;v--;)g.emit(n.nameFn(h,p[v]),i,y)}else delete f[h]}else delete f[h];s.sublen=d,s.cb=o}},n.eventRicher={pause:function(){return e.signal()},resume:function(t,n){e.signal(t,n)}},n.load=function(t){t.fac.call(t),t.state=3;var i=a[t.id],o=void 0,r=void 0,c=void 0,s=void 0,u=void 0;for(var f in i)if((o=i[f])&&o.length)for(r=o.length;r--;)if(c=o[r],s=e.get(u=n.nameFn(c.cmp,c.evt))){var l=s.record(u,c.cmp);g.emit(n.nameFn(t.id,f),c.data,l)}else o.splice(r,1);else delete i[f]},u.__env__=new n("__env__",null,function(){}),u.__env__.state=2;var w={ctor:function(t,e){return this.cmp=u[t]||(u[t]=new n(t)),e&&(this.cmp.ctx="#"+t),this},host:function(t,e){var i=this;if(!i.cmp)return i;var o=i.cmp;if(1===arguments.length&&m(arguments[0])&&(e=t,t=null),t)if(p(t)){var r=t.length-1;for(o.ctx=t[r];r--;){i.copy=i.copy||[];var c=o.id+"_v"+r;i.copy.push(u[c]=new n(c,e||o.options,o.factory))}}else o.ctx=t,e&&(o.opts=o.opts?Object.assign(o.opts,e):e);else o.ctx="#"+o.id,o.opts=e;return i},sub:function(t,i,o){p(i)||(i=[i]);for(var r=void 0,c=i.length;c--;)if(r=e.get(n.nameFn(t,i[c]))){if(r.addSub(o,this.cmp.id),this.copy&&this.copy.length)for(var s=this.copy.length;s--;)r.addSub(o,this.copy[s].id)}else{if((r=new e(i[c],t)).addSub(this.cmp.id,o),this.copy&&this.copy.length)for(var a=this.copy.length;a--;)r.addSub(this.copy[a].id,o);e.set(r)}return this}};w.ctor.prototype=w;var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S=window.wc=function(t,e){return w.ctor(t,e)};"function"==typeof define?define.amd?define("wc",[],function(){return S}):define.cmd&&define(function(t,e,n){n.exports=S}):"undefined"!=typeof module&&"object"===("undefined"==typeof exports?"undefined":x(exports))&&(module.exports=S),S.version="0.0.1",S.define=function(t,e,i){if(t){var o=u[t];o?(o.fac=i,e&&(o.opts=o.opts?Object.assign(o.opts,e):e)):o=u[t]=new n(t,e,i),o.state=2}},S.config=function(t){t.debug&&(S.data={cmps:u,waitingSubscribers:a,events:b}),l.threshold=t.threshold||0,l.combo=t.combo},S.fn=function(t,e){if(!d.includes(t))return this;var i=n.prototype;if(v(e))i[t]=function(){return e.apply(this,arguments)};else if(m(e)){var o=i[o];i[t]=o?Object.assign(o,e):e}};var j=Object.freeze({throttle:i}),R=window.$||window.jQuery,T=document,F=T.head||T.getElementsByTagName("head")[0]||T.documentElement,k=F.getElementsByTagName("base")[0],O=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/?(\d+).*/i,"$1")<536,E=window.$;S.fn("util",j),S.fn("$",o),S.fn("tpl",function(t,e,n){return window[n?"renderString":"render"](t,e)}),S.fn("http",function(t,e){var n=t.lastIndexOf("."),i=t.substring(n+1,t.length),o=void 0;if("css"===i||"js"===i){var r=E.Deferred();return c(t,function(t){return t?r.reject(t):r.resolve("ok")}),o=r.promise(),o.catch=o.error||o.fail,o}var s=E.extend({url:t},e);return o=$.ajax(s),o.catch=o.error||o.fail,o}),R(function(){s()&&u.__env__.pub("ready")});var I=R(document),L=R(window).on("load",function(){return s()&&u.__env__.pub("onLoad")}).on("resize",i(function(){return s()&&u.__env__.pub("onResize",[L.width(),L.height(),I.width(),I.height()])},300)).on("scroll",i(function(){return s()&&u.__env__.pub("onScroll",[L.scrollTop(),L.scrollLeft()])},300)).on("beforeunload",function(){return u.__env__.pub("beforeLeave"),"beforeleave"})}();